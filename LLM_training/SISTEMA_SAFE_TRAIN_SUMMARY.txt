â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                     âœ… SISTEMA SAFE TRAIN INSTALADO                        â•‘
â•‘             Sistema AutomÃ¡tico de DiagnÃ³stico + RecomendaÃ§Ã£o             â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸ“¦ FICHEIROS CRIADOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

SCRIPTS PYTHON
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… scripts/preflight_check.py
   â†’ DiagnÃ³stico completo do sistema
   â†’ Testa Python, MLX, GPU, dados, modelo
   â†’ Recomenda config otimizada para seu hardware
   â†’ Gera: recommended_config.json

âœ… scripts/safe_train.py
   â†’ Wrapper Python com menu interativo
   â†’ OpÃ§Ã£o de abrir notebook ou executar script
   â†’ Mostra instruÃ§Ãµes pÃ³s-treino

SCRIPT BASH
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… train_safe.sh
   â†’ Wrapper bash (chamada Ãºnica)
   â†’ Executa: ./train_safe.sh
   â†’ Menu colorido com opÃ§Ãµes

DOCUMENTAÃ‡ÃƒO
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
âœ… SAFE_TRAIN_START_HERE.md (COMEÃ‡A AQUI!)
   â†’ Quick start (5 minutos)
   â†’ Ãndice de recursos
   â†’ PrÃ³ximos passos

âœ… README_PREFLIGHT.md
   â†’ Guia detalhado (15 minutos)
   â†’ O que cada parÃ¢metro faz
   â†’ Troubleshooting completo

âœ… SAFE_TRAIN_QUICK_START.md
   â†’ Workflow completo (30 minutos)
   â†’ CenÃ¡rios de recomendaÃ§Ã£o por hardware
   â†’ Guia de troubleshooting avanÃ§ado

âœ… APPLY_RECOMMENDED_CONFIG.md
   â†’ Como aplicar config ao notebook (10 minutos)
   â†’ Passo a passo com exemplos
   â†’ Checklist antes de executar


ğŸš€ COMO COMEÃ‡AR (TL;DR)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

OpÃ§Ã£o 1: Script AutomÃ¡tico (RECOMENDADO - 5 min)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
$ cd /Users/f.nuno/Desktop/chatbot_2.0/LLM_training
$ ./train_safe.sh
â†’ Menu interativo com opÃ§Ãµes

OpÃ§Ã£o 2: Preflight Check Manual (5 min)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
$ python3 scripts/preflight_check.py
$ cat checkpoints_qlora/recommended_config.json
$ jupyter notebook notebooks/mistral_qlora_training.ipynb
â†’ Atualizar valores de config no notebook
â†’ Executar notebook

OpÃ§Ã£o 3: Ler DocumentaÃ§Ã£o Primeiro (15 min)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Ler: SAFE_TRAIN_START_HERE.md
2. Ler: APPLY_RECOMMENDED_CONFIG.md
3. Correr: python3 scripts/preflight_check.py
4. Seguir instruÃ§Ãµes


ğŸ“Š O QUE PREFLIGHT_CHECK.PY FAZ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Verifica:
  âœ“ Python versÃ£o (3.10+)
  âœ“ MLX instalado
  âœ“ MLX-LM instalado
  âœ“ Transformers instalado
  âœ“ Outras dependÃªncias (psutil, pandas, tqdm)
  âœ“ Mac M1/M2/M3 detectado
  âœ“ Metal GPU disponÃ­vel
  âœ“ RAM disponÃ­vel
  âœ“ EspaÃ§o em disco
  âœ“ Ficheiros de dados existem
  âœ“ Modelo pode ser carregado

Recomenda (baseado em seu hardware):
  âœ¨ batch_size (1, 2, 4, 8)
  âœ¨ gradient_accumulation (1, 2, 4, 8)
  âœ¨ max_seq_length (128, 256, 512)
  âœ¨ learning_rate (1e-4 a 5e-4)
  âœ¨ Todas outras configs


ğŸ“ FICHEIROS GERADOS PELO SISTEMA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ApÃ³s executar: python3 scripts/preflight_check.py

checkpoints_qlora/
â”œâ”€â”€ preflight_report.json          â† RelatÃ³rio tÃ©cnico completo
â””â”€â”€ recommended_config.json        â† â­ COPIAR VALORES DAQUI PARA NOTEBOOK


âš¡ WORKFLOW RÃPIDO (2-3 HORAS TOTAL)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Terminal 1: Principais operaÃ§Ãµes
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. python3 scripts/preflight_check.py          (2 min)
2. cat checkpoints_qlora/recommended_config.json (1 min - copiar valores)
3. jupyter notebook notebooks/mistral_qlora_training.ipynb (2-3 horas)
   â†’ Localizar "training_config"
   â†’ Colar valores do passo 2
   â†’ Clicar "Run All"

Terminal 2: Monitorar treino (enquanto Terminal 1 estÃ¡ em execuÃ§Ã£o)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
python3 scripts/monitor.py --refresh 5
â†’ Mostra loss, memÃ³ria, ETA em tempo real

Terminal 3: ApÃ³s treino
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
python3 scripts/visualization.py --report
python3 scripts/inference_qlora.py "sua pergunta"


ğŸ¯ EXEMPLOS DE HARDWARE â†’ CONFIG
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

M1 Base (8GB)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
batch_size: 2
gradient_accumulation: 2
max_seq_length: 512
learning_rate: 0.0003
â†’ DuraÃ§Ã£o: 2.5 horas

M1 Pro (16GB)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
batch_size: 4
gradient_accumulation: 2
max_seq_length: 512
learning_rate: 0.0005
â†’ DuraÃ§Ã£o: 1.5 horas

M1 Tight (< 6GB)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
batch_size: 1
gradient_accumulation: 8
max_seq_length: 128
learning_rate: 0.0001
â†’ DuraÃ§Ã£o: 3-4 horas


âŒ SE DER ERRO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

"Out of Memory" durante treino?
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Aumentar gradient_accumulation: 2 â†’ 4 ou 8
2. Ou reduzir batch_size: 4 â†’ 2 â†’ 1
3. Ou reduzir max_seq_length: 512 â†’ 256 â†’ 128

Treino muito lento?
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Aumentar batch_size (se houver memÃ³ria): 1 â†’ 2 â†’ 4
2. Aumentar learning_rate: 0.0001 â†’ 0.0003
3. Reduzir warmup_steps

Loss nÃ£o diminui?
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. Aumentar learning_rate: 0.0001 â†’ 0.0005
2. Aumentar warmup_steps: 50 â†’ 100 â†’ 200
3. Validar dados: python3 scripts/validate_jsonl.py data/train.jsonl

Modelo nÃ£o carrega?
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
1. python3 scripts/preflight_check.py â†’ ver erros
2. pip install mlx mlx-lm transformers
3. Verificar espaÃ§o em disco (precisa 5+ GB)


ğŸ“š DOCUMENTAÃ‡ÃƒO COMPLETA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Para Iniciar                   â†’ SAFE_TRAIN_START_HERE.md (5 min)
Para Entender Tudo             â†’ README_PREFLIGHT.md (15 min)
Para Workflow Completo         â†’ SAFE_TRAIN_QUICK_START.md (30 min)
Para Atualizar Notebook        â†’ APPLY_RECOMMENDED_CONFIG.md (10 min)
Para Entender QLoRA            â†’ docs/guides/QLORA_GUIDE.md (45 min)
Para Troubleshooting AvanÃ§ado  â†’ docs/troubleshooting/QLORA_TROUBLESHOOTING.md


âœ… CHECKLIST ANTES DE TREINAR
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¡ Executei: python3 scripts/preflight_check.py
â–¡ Verificar preflight_report.json para problemas
â–¡ Copiar valores de recommended_config.json
â–¡ Abrir notebook: jupyter notebook notebooks/mistral_qlora_training.ipynb
â–¡ Localizar "training_config"
â–¡ Colar valores do preflight (batch_size, gradient_accumulation, etc)
â–¡ Salvar notebook (Cmd+S ou Ctrl+S)
â–¡ Terminal 2 pronta para monitor: python3 scripts/monitor.py
â–¡ Outras aplicaÃ§Ãµes pesadas fechadas
â–¡ Internet estÃ¡vel (pode descarregar ~3.8GB primeira vez)


ğŸ¬ PRÃ“XIMOS PASSOS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Escolher inÃ­cio:
   $ ./train_safe.sh                          (FÃCIL - menu interativo)
   $ python3 scripts/preflight_check.py       (MANUAL)
   less SAFE_TRAIN_START_HERE.md              (LER PRIMEIRO)

2. Seguir instruÃ§Ãµes do preflight_check ou do script

3. Atualizar notebook com valores recomendados

4. Executar notebook

5. Monitorar em terminal separada:
   $ python3 scripts/monitor.py --refresh 5

6. ApÃ³s treino:
   $ python3 scripts/visualization.py --report
   $ python3 scripts/inference_qlora.py "pergunta"


ğŸ†˜ SUPORTE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

DÃºvida sobre:          Consulte:
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€         â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Como comeÃ§ar?          SAFE_TRAIN_START_HERE.md
Erro no preflight?     README_PREFLIGHT.md â†’ Troubleshooting
Como atualizar config? APPLY_RECOMMENDED_CONFIG.md
Treino crashed?        SAFE_TRAIN_QUICK_START.md â†’ Troubleshooting
O que Ã© QLoRA?         docs/guides/QLORA_GUIDE.md


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ğŸš€ PRONTO PARA COMEÃ‡AR?

Copie e cole no terminal:

$ cd /Users/f.nuno/Desktop/chatbot_2.0/LLM_training
$ ./train_safe.sh

OU

$ python3 scripts/preflight_check.py

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Sistema criado: 2024-11-18
VersÃ£o: 1.0
Status: âœ… Pronto para usar

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
