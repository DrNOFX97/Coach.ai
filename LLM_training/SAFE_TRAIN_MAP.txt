â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                  SAFE TRAIN - MAPA DE NAVEGAÃ‡ÃƒO VISUAL                   â•‘
â•‘                     Sistema de DiagnÃ³stico + Treino Seguro                â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                          VOCÃŠ ESTÃ AQUI ğŸ‘ˆ                               â”‚
â”‚                      ğŸ“ COMEÃ‡AR SETUP DO TREINO                          â”‚
â”‚                                                                            â”‚
â”‚  Escolha uma opÃ§Ã£o abaixo:                                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


OPÃ‡ÃƒO A: âš¡ RÃPIDO (AutomÃ¡tico - 10 minutos)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

        terminal$ ./train_safe.sh
                    â”‚
                    â”œâ”€ Menu Interativo Colorido
                    â”‚
                    â”œâ”€ OpÃ§Ã£o 1: Abrir Notebook
                    â”‚  â””â”€ Atualizar config
                    â”‚  â””â”€ Executar treino
                    â”‚
                    â”œâ”€ OpÃ§Ã£o 2: Rodar Script Python
                    â”‚  â””â”€ Treino automatizado
                    â”‚
                    â””â”€ OpÃ§Ã£o 3: Ver InstruÃ§Ãµes Manuais
                       â””â”€ Fazer tudo manualmente


OPÃ‡ÃƒO B: ğŸ” CONTROLADO (Manual passo a passo - 15 minutos)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    1. DIAGNÃ“STICO
       terminal$ python3 scripts/preflight_check.py
                   â”‚
                   â”œâ”€ Verifica Python, MLX, GPU
                   â”œâ”€ Valida dados e modelo
                   â””â”€ Gera recommended_config.json â­
                       â”‚
                       â””â”€ checkpoints_qlora/recommended_config.json

    2. VER RECOMENDAÃ‡Ã•ES
       terminal$ cat checkpoints_qlora/recommended_config.json
                   â”‚
                   â”œâ”€ batch_size: ?
                   â”œâ”€ gradient_accumulation: ?
                   â”œâ”€ max_seq_length: ?
                   â”œâ”€ learning_rate: ?
                   â””â”€ ... copiar esses valores!

    3. ABRIR NOTEBOOK
       terminal$ jupyter notebook notebooks/mistral_qlora_training.ipynb
                   â”‚
                   â”œâ”€ Localizar: "training_config = {"
                   â”‚
                   â”œâ”€ Atualizar campos:
                   â”‚  â”œâ”€ batch_size
                   â”‚  â”œâ”€ gradient_accumulation
                   â”‚  â”œâ”€ max_seq_length
                   â”‚  â”œâ”€ learning_rate
                   â”‚  â””â”€ (com valores do passo 2)
                   â”‚
                   â””â”€ Executar cells: Shift+Enter (ou "Run All")

    4. MONITORAR (Terminal Separada)
       terminal$ python3 scripts/monitor.py --refresh 5
                   â”‚
                   â”œâ”€ Loss em tempo real
                   â”œâ”€ Uso de memÃ³ria
                   â””â”€ ETA atÃ© conclusÃ£o

    5. APÃ“S TREINO
       terminal$ python3 scripts/visualization.py --report
       terminal$ python3 scripts/inference_qlora.py "pergunta"


OPÃ‡ÃƒO C: ğŸ“– EDUCACIONAL (Ler documentaÃ§Ã£o - 30 minutos)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    Leitura Recomendada
    â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

    1ï¸âƒ£  SAFE_TRAIN_START_HERE.md (5 min)
        â”œâ”€ O que Ã© o sistema?
        â”œâ”€ Como comeÃ§ar?
        â”œâ”€ PrÃ³ximos passos
        â””â”€ Ãndice de recursos

    2ï¸âƒ£  README_PREFLIGHT.md (15 min)
        â”œâ”€ O que preflight_check faz?
        â”œâ”€ O que cada parÃ¢metro significa?
        â”œâ”€ Troubleshooting
        â””â”€ Exemplos por hardware

    3ï¸âƒ£  APPLY_RECOMMENDED_CONFIG.md (10 min)
        â”œâ”€ Como atualizar notebook?
        â”œâ”€ Passo a passo detalhado
        â”œâ”€ Checklist de validaÃ§Ã£o
        â””â”€ Exemplos prÃ¡ticos

    Depois, seguir OPÃ‡ÃƒO A ou B


ESTRUTURA DE FICHEIROS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

LLM_training/
â”‚
â”œâ”€â”€ ğŸš€ COMO COMEÃ‡AR (LEIA ESTES PRIMEIRO!)
â”‚   â”œâ”€â”€ SAFE_TRAIN_START_HERE.md â­ (5 min)
â”‚   â”œâ”€â”€ SAFE_TRAIN_MAP.txt (vocÃª estÃ¡ aqui!)
â”‚   â””â”€â”€ SISTEMA_SAFE_TRAIN_SUMMARY.txt (resumo)
â”‚
â”œâ”€â”€ ğŸ“š DOCUMENTAÃ‡ÃƒO
â”‚   â”œâ”€â”€ README_PREFLIGHT.md (guia completo)
â”‚   â”œâ”€â”€ SAFE_TRAIN_QUICK_START.md (workflow + troubleshooting)
â”‚   â”œâ”€â”€ APPLY_RECOMMENDED_CONFIG.md (como atualizar notebook)
â”‚   â””â”€â”€ CLAUDE.md (contexto do projeto)
â”‚
â”œâ”€â”€ ğŸ”§ SCRIPTS
â”‚   â”œâ”€â”€ train_safe.sh â­ (wrapper bash - FÃCIL)
â”‚   â””â”€â”€ scripts/
â”‚       â”œâ”€â”€ preflight_check.py (diagnÃ³stico do sistema)
â”‚       â”œâ”€â”€ safe_train.py (wrapper Python)
â”‚       â”œâ”€â”€ train_qlora.py (treino principal)
â”‚       â”œâ”€â”€ monitor.py (monitorar em tempo real)
â”‚       â”œâ”€â”€ inference_qlora.py (testar modelo)
â”‚       â””â”€â”€ visualization.py (gerar grÃ¡ficos)
â”‚
â”œâ”€â”€ ğŸ“Š DADOS
â”‚   â””â”€â”€ data/
â”‚       â”œâ”€â”€ train_v3_final_complete.jsonl
â”‚       â””â”€â”€ valid_v3_final_complete.jsonl
â”‚
â”œâ”€â”€ ğŸ““ NOTEBOOKS
â”‚   â””â”€â”€ notebooks/
â”‚       â””â”€â”€ mistral_qlora_training.ipynb
â”‚
â””â”€â”€ ğŸ“‚ CHECKPOINTS (GERADO APÃ“S TREINO)
    â””â”€â”€ checkpoints_qlora/
        â”œâ”€â”€ preflight_report.json â­ (ver apÃ³s diagnÃ³stico)
        â”œâ”€â”€ recommended_config.json â­ (COPIAR VALORES DAQUI)
        â”œâ”€â”€ checkpoint_epoch_*/
        â”œâ”€â”€ adapters/
        â”œâ”€â”€ training_metrics.json
        â”œâ”€â”€ training_summary.json
        â””â”€â”€ plots/


DECISÃƒO RÃPIDA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Sou iniciante?
  â””â”€â†’ OPÃ‡ÃƒO A: ./train_safe.sh
      (menu interativo, muito fÃ¡cil)

Quero entender tudo?
  â””â”€â†’ OPÃ‡ÃƒO C: Ler documentaÃ§Ã£o
      (depois seguir OPÃ‡ÃƒO A)

Sou um power user?
  â””â”€â†’ OPÃ‡ÃƒO B: Passo a passo manual
      (controle total)

Tenho pressa?
  â””â”€â†’ OPÃ‡ÃƒO A: ./train_safe.sh
      (mais rÃ¡pido)

JÃ¡ treinei antes?
  â””â”€â†’ OPÃ‡ÃƒO B: Passo a passo manual
      (conheces o fluxo)


FLUXO VISUAL DO SISTEMA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚  PREFLIGHT CHECK â”‚
                        â”‚  DiagnÃ³stico do  â”‚
                        â”‚  Sistema         â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    âœ“ Python OK?
                    âœ“ MLX OK?
                    âœ“ GPU OK?
                    âœ“ Dados OK?
                    âœ“ Modelo OK?
                                 â”‚
                                 â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ RECOMENDAÃ‡ÃƒO     â”‚
                        â”‚ Config Otimizada â”‚
                        â”‚ Para Seu         â”‚
                        â”‚ Hardware         â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                    batch_size: ?
                    grad_accum: ?
                    seq_length: ?
                    learn_rate: ?
                                 â”‚
                                 â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ NOTEBOOK/SCRIPT  â”‚
                        â”‚ Atualizar Config â”‚
                        â”‚ + Executar       â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ TREINO           â”‚
                        â”‚ 2-3 Horas        â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ MONITORAR        â”‚
                        â”‚ (Monitor.py)     â”‚
                        â”‚ Loss, RAM, ETA   â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ CHECKPOINTS      â”‚
                        â”‚ Salvos em:       â”‚
                        â”‚ checkpoints_     â”‚
                        â”‚ qlora/adapters/  â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚ ANÃLISE          â”‚
                        â”‚ VisualizaÃ§Ã£o +   â”‚
                        â”‚ Testes           â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


DURAÃ‡ÃƒO ESTIMADA
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Atividade                          Tempo
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Preflight Check                    2 minutos
Ver RecomendaÃ§Ãµes                  1 minuto
Atualizar Notebook                 2 minutos
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
SETUP TOTAL                        5 minutos
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Treino (3 Ã©pocas)                  2-3 horas (depende de hardware)
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
Monitorar                          ContÃ­nuo durante treino
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
AnÃ¡lise PÃ³s-Treino                 5 minutos
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
TOTAL GERAL                        2.5-3.5 horas


CHECKLIST RÃPIDO
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PRÃ‰-DIAGNÃ“STICO
  â–¡ Estou na pasta certa? /LLM_training
  â–¡ Tenho internet? (primeira descarga ~3.8GB)
  â–¡ Fechei aplicaÃ§Ãµes pesadas?
  â–¡ Tenho terminal separada para monitor?

DURANTE DIAGNÃ“STICO
  â–¡ Rodei: python3 scripts/preflight_check.py
  â–¡ Verifiquei recommended_config.json
  â–¡ Copiei os valores corretos

ANTES DE TREINO
  â–¡ Abri notebook
  â–¡ Localizei training_config
  â–¡ Atualizei todos os valores
  â–¡ Salvei o notebook
  â–¡ Lembrei de abrir monitor em terminal separada

DURANTE TREINO
  â–¡ Monitor estÃ¡ rodando
  â–¡ Vejo loss diminuindo
  â–¡ MemÃ³ria estÃ¡ OK
  â–¡ Nenhum erro visÃ­vel

PÃ“S-TREINO
  â–¡ Rodei visualization.py
  â–¡ Rodei inference_qlora.py para testar
  â–¡ Checkpoints foram salvos


ERRO? COME AQUI!
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Erro de Preflight?
  â””â”€â†’ Ler: README_PREFLIGHT.md â†’ Troubleshooting

Out of Memory durante treino?
  â””â”€â†’ Aumentar gradient_accumulation
  â””â”€â†’ Reduzir batch_size
  â””â”€â†’ Reduzir max_seq_length

Treino muito lento?
  â””â”€â†’ Aumentar batch_size
  â””â”€â†’ Aumentar learning_rate

Loss nÃ£o diminui?
  â””â”€â†’ Aumentar learning_rate
  â””â”€â†’ Aumentar warmup_steps

Modelo nÃ£o carrega?
  â””â”€â†’ Verificar: pip install mlx mlx-lm

NÃ£o sabe o que fazer?
  â””â”€â†’ Ler: SAFE_TRAIN_QUICK_START.md â†’ Troubleshooting

Mais ajuda?
  â””â”€â†’ Ler: docs/troubleshooting/QLORA_TROUBLESHOOTING.md


â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                    ğŸš€ PRONTO PARA COMEÃ‡AR?

                    Copie uma destas linhas:

              1. FÃCIL (recomendado):
                 $ ./train_safe.sh

              2. MANUAL:
                 $ python3 scripts/preflight_check.py

              3. LEITURA PRIMEIRO:
                 $ less SAFE_TRAIN_START_HERE.md

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

VersÃ£o: 1.0
Data: 2024-11-18
Status: âœ… Pronto para usar

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
